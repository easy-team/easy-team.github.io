(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{150:function(a,t,s){"use strict";s.r(t);var e=s(0),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h3",{attrs:{id:"检测构建速度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#检测构建速度"}},[a._v("#")]),a._v(" 检测构建速度")]),a._v(" "),s("p",[a._v("最新的 "),s("code",[a._v("easywebpack-cli@4.0.0")]),a._v(" 可以通过 "),s("code",[a._v("easy build --speed")]),a._v("  检测 Webpack 各 loader 和 plugin 处理耗时。")]),a._v(" "),s("h3",{attrs:{id:"dll-公共提取"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dll-公共提取"}},[a._v("#")]),a._v(" DLL 公共提取")]),a._v(" "),s("p",[s("strong",[a._v("Webpack 通过 ")]),s("a",{attrs:{href:"https://doc.webpack-china.org/plugins/dll-plugin/",target:"_blank"}},[a._v("DLLPlugin 和 DLLReferencePlugin")]),s("strong",[a._v(" 可以实现公共类库的单独提取，能极大大提升了构建的速度.")])]),s("p",[a._v("只需要在 "),s("code",[a._v("webpack.config.js")]),a._v(" 文件添加 dll 节点配置即可完成 "),s("code",[a._v("dll")]),a._v(" 整个流程。")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n dll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'vuex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'axios'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" \n")])])]),s("p",[a._v("详细方案："),s("a",{attrs:{href:"http://hubcarl.github.io/easywebpack/webpack/dll/",target:"_blank"}},[a._v("Webpack DLL 工程化实现")])]),a._v(" "),s("h3",{attrs:{id:"开启-cache-loader-缓存编译"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启-cache-loader-缓存编译"}},[a._v("#")]),a._v(" 开启 cache-loader 缓存编译")]),a._v(" "),s("p",[a._v("默认 "),s("code",[a._v("babel-loader")]),a._v(" 和 "),s("code",[a._v("ts-loader")]),a._v(" 没有启用 "),s("code",[a._v("thread-loader")]),a._v(" 和 "),s("code",[a._v("cache-loader")]),a._v(" 加速构建。当构建的 "),s("code",[a._v("entry")]),a._v(" 太少时, 开启后，反而构建速度会慢一些，只有当项目足够大以后或者构建速度太慢，才建议开启，然后对比决定是否要开启该配置。")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// webpack.config.js")]),a._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n compile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n   thread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 多进程编译")]),a._v("\n   cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 启动编译缓存")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" \n")])])]),s("p"),s("p",[a._v("要求：easywebpack4 ")]),a._v(" "),s("h3",{attrs:{id:"egg-ssr-构建多进程编译"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#egg-ssr-构建多进程编译"}},[a._v("#")]),a._v(" Egg SSR 构建多进程编译")]),a._v(" "),s("p",[a._v("在 Egg SSR 项目中, 我们通过 "),s("code",[a._v("egg-webpack")]),a._v(" 实现本地开发模式编译，早期版本需要在 Egg 项目的 "),s("code",[a._v("config/config.local.js")]),a._v(" 配置 "),s("code",[a._v("webpackConfigList")]),a._v(" 配置")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" EasyWebpack "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'easywebpack-vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n webpackConfigList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" EasyWebpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getWebpackConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" \n")])])]),s("p",[a._v("这种方式只会采用单进程编译模式，速度会慢一些， 我们可以通过去掉 "),s("code",[a._v("webpackConfigList")]),a._v(" 配置即可开启 "),s("code",[a._v("egg-webpack")]),a._v(" 开启多进程编译模式。 结合 "),s("code",[a._v("DLL 公共提取")]),a._v(" 和 "),s("code",[a._v("cache-loader")]),a._v(" 缓存编译模式, 构建速度可以从 40s 减少到 10 s 以内。")]),a._v(" "),s("h2",{attrs:{id:"egg-ssr-babel-构建优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#egg-ssr-babel-构建优化"}},[a._v("#")]),a._v(" Egg SSR Babel 构建优化")]),a._v(" "),s("p",{staticStyle:{"padding-left":"2em"}},[s("a",{attrs:{href:"https://www.yuque.com/easy-team/ves/babel",target:"_blank"}},[a._v("https://www.yuque.com/easy-team/ves/babel")])])])}),[],!1,null,null,null);t.default=n.exports}}]);