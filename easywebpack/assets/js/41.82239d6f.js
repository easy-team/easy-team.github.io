(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{167:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"webpack-dll-构建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-dll-构建"}},[t._v("#")]),t._v(" Webpack Dll 构建")]),t._v(" "),s("p",{staticStyle:{"text-indent":"2em"}},[t._v("在 3.5.0 版本之前，webpack 构建随着项目越来越来大，打包也就越来越慢; 同时 dll 工程化构建也没有内置支持。虽然可以通过在 easywebpack 中添加 new webpack.DllPlugin() 和 webpack.DllReferencePlugin() 方式实现 dll 方案，但使用起来还是很繁琐: 因为需要先单独为 dll 添加 webpack.config.js 配置， 然后先手动先构建dll，然后在页面里面配置dll的引用，最后再构建页面。easywebpack 3.5.0 从工程化的角度内置支持了。")]),t._v(" "),s("h3",{attrs:{id:"_1-当前网上流行的-webpack-dll-方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-当前网上流行的-webpack-dll-方案"}},[t._v("#")]),t._v(" 1. 当前网上流行的 Webpack Dll 方案")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("1.需要单独写一份 dll 的 webpack 配置文件")])])]),s("ul",[s("li",[s("p",[t._v("2.需要手动先编译 webpack dll manifest 文件")])])]),s("ul",[s("li",[s("p",[t._v("3.需要在另一份页面 webpack 配置文件中引用 dll manifest 文件")])])]),s("ul",[s("li",[s("p",[t._v("4.编译好dll manifest 文件后，再编译页面构建")])])]),s("ul",[s("li",[s("p",[t._v("5.构建的 dll.js 文件 和 页面构建生产的 js 文件 手动引入")])])]),s("ul",[s("li",[s("p",[t._v("6.dll 配置变更时，需要手动再次重新执行 1 和 4 步骤")])])]),t._v(" "),s("h3",{attrs:{id:"_2-理想中-webpack-dll-构建："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-理想中-webpack-dll-构建："}},[t._v("#")]),t._v(" 2. 理想中 Webpack Dll 构建：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("1.只需要配置 dll 第三方库信息，无需配置完整的 webpack.config.js")])])]),s("ul",[s("li",[s("p",[t._v("2.构建时无需手动编译dll，有构建工具底层解决 dll编译和页面编译衔接问题。")])])]),s("ul",[s("li",[s("p",[t._v("3.构建底层支持 dll.js 文件 和 页面 js 合并注入到页面。")])])]),s("ul",[s("li",[s("p",[t._v("4.从底层支持配置变更，自动重新编译dll")])])]),t._v(" "),s("h3",{attrs:{id:"_3-工程化-easywebpack-dll-方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-工程化-easywebpack-dll-方案"}},[t._v("#")]),t._v(" 3. 工程化 easywebpack Dll 方案")]),t._v(" "),s("p",[s("code",[t._v("easywebpack")]),t._v(" 3.5.6 版本目前已经解决理想中 dll 构建方案的 1,2,3,4 问题, 赶快使用起来吧！")]),t._v(" "),s("h4",{attrs:{id:"easywebpack-dll-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#easywebpack-dll-配置"}},[t._v("#")]),t._v(" easywebpack dll 配置")]),t._v(" "),s("p",[t._v("只需要在 "),s("code",[t._v("webpack.config.js")]),t._v(" 文件添加 dll 节点配置即可完成 "),s("code",[t._v("dll")]),t._v(" 整个流程。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n dll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("p",[t._v("这样默认生成的 dll 文件名称为 "),s("code",[t._v("vendor.js")]),t._v(", 你可以通过如下方式进行自定义")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n dll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dll'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   lib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("h4",{attrs:{id:"工程化-easywebpack-多-dll-方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#工程化-easywebpack-多-dll-方案"}},[t._v("#")]),t._v(" 工程化 easywebpack 多 Dll 方案")]),t._v(" "),s("p",[t._v("目前 easywebpack 从设计上面支持多 Dll 配置和根据页面使用对应的Dll。但目前官方的 "),s("code",[t._v("DllReferencePlugin")]),t._v(" 由两个比较严重的问题：")]),s("ul",[s("li",[s("p",[t._v("当多个 DLL 中存在相同的包依赖时, 页面相同包依赖解析会以配置的最后一个 Dll 作为依赖解析，这样导致 Dll 引用出错。")])])]),s("ul",[s("li",[s("p",[t._v("即使配置的依赖包不存在依赖，也不能保证包依赖的包不存在依赖。")])])]),s("blockquote",[s("p",[t._v("使用多 DLL 方案时, 请确认是否存在上面两个问题, 如果不存在, 可以尝试使用")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n dll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lib'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     lib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     include"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     exclue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'router'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     lib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     include"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     exclue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("h4",{attrs:{id:"easywebpack-dll-构建流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#easywebpack-dll-构建流程"}},[t._v("#")]),t._v(" easywebpack dll 构建流程")]),t._v(" "),s("p",[t._v("本地开发时，我们通过 "),s("code",[t._v("npm start")]),t._v(" 一步完成 webpack dll 构建和页面构建，简化了先手动编译 webpack dll，然后构建页面。easywebpack 是如何解决上面 dll 的问题呢？")]),s("ol",{attrs:{start:"1"}},[s("li",[s("p",[t._v("npm start 首次启动时，检查 "),s("code",[t._v("webpack.config.js")]),t._v(" 是否配置了 "),s("code",[t._v("dll")]),t._v(" 节点信息， 如果配置了，同时 manifest-{name}-dll.json 文件不存在，则构建 dll.js 文件，同时生成 manifest-${name}-dll.json 文件 和 dll 的 资源依赖 manifest.json 文件。")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("dll 构建完成后，自动启动 webpack 页面构建，同时把 dll 资源依赖 manifest.json 文件与页面资源依赖 manifest.json 文件进行合并，同时构造好资源依赖。")])])]),s("ol",{attrs:{start:"3"}},[s("li",[s("p",[t._v("webpack 页面构建完成后，自动打开浏览器。")])])]),s("ol",{attrs:{start:"4"}},[s("li",[s("p",[t._v("下次 npm start 时，因为 manifest-${name}-dll.json 文件存在，所以 1 的步骤跳过，直接进行2 和 3，这时候构建速度会显著提升。")])])]),s("ol",{attrs:{start:"5"}},[s("li",[s("p",[t._v("当修改 "),s("code",[t._v("webpack.config.js")]),t._v(" 或者 dll 依赖的包版本变更时，再次构建时会重新生成 dll.js 和 manifest 文件以及依赖关系。")])])]),s("ol",{attrs:{start:"6"}},[s("li",[s("p",[t._v("easywebpack-cli 提供 easy clean 清理缓存和 easy open 打开缓存目录命令")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);