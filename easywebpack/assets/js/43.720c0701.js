(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{168:function(e,t,a){"use strict";a.r(t);var r=a(0),o=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"babel-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-配置"}},[e._v("#")]),e._v(" Babel 配置")]),e._v(" "),a("div",{staticClass:"lake-content-editor-core lake-engine",attrs:{"data-lake-element":"root","data-selection-116733":"%7B%22path%22%3A%5B%5B2%2C0%2C51%5D%2C%5B2%2C0%2C51%5D%5D%2C%22uuid%22%3A%22116733%22%2C%22active%22%3Atrue%7D"}},[a("h3",{attrs:{id:"babel-版本说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-版本说明"}},[e._v("#")]),e._v(" Babel 版本说明")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"text-indent":"2em","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("easywebpack 体系目前内置 Babel 为 6 ，因涉及底层改动以及兼容等问题，为了保证现有已经运行项目的稳定性，暂还没有从框架层进行内置修改，目前提供两种方式进行升级 Babel 7。")]),a("p",{staticStyle:{"text-indent":"2em","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[a("li",[a("strong",[e._v("方式一：使用 ")]),a("strong",[a("span",[e._v("@")])]),a("strong",[e._v("easy-team 插件依赖")])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"text-indent":"2em","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("为了更方便升级 Babel7, 同时尽量减少配置且无需安装 @babel 依赖，@easy-team 模式直接内置 Babel 7 的相关依赖，只需要把 easywebpack 依赖模式改成 "),a("span",[e._v("@")]),a("span",[e._v("easy-team/easywebpack 模式以及修改 .babelrc 的插件为 "),a("span",{attrs:{"data-card-type":"inline","data-lake-card":"mention"}}),e._v(" 模式。")]),a("span",[e._v("如果代码中直接依赖了也请一并修改。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("ul",{staticStyle:{"list-style-type":"none",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"1"}},[a("ul",{staticStyle:{"list-style-type":"circle",margin:"0px","padding-left":"23px"},attrs:{"lake-indent":"0"}},[a("li",[a("span",[e._v("@")]),a("span",[e._v("easy-team/easywebpack-cli: ^4.0.0 替换  easywebpack-cli")])]),a("li",[a("span",[e._v("@")]),a("span",[e._v("easy-team/easywebpack-react: ^4.0.0 替换  easywebpack-react")])]),a("li",[a("span",[e._v("@easy-team/easywebpack-vue")]),a("span",[e._v(": ^4.0.0 替换  easywebpack-vue")])]),a("li",[a("span",[e._v(".babelrc 依赖的插件修改为 ")]),e._v(" "),a("span",[e._v("@")]),a("span",[e._v("babel ")]),a("span",[e._v("模式， 插件对应关系见 ")]),a("a",{attrs:{href:"https://www.yuque.com/easy-team/easywebpack/babel7",target:"_blank"}},[a("span",[e._v("babel 升级")])])])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[a("li",[a("strong",[e._v("方式二：覆盖内置 babel 依赖和配置  ")])])]),a("p",{staticStyle:{"text-indent":"2em","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"text-indent":"2em","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("a",{attrs:{href:"https://www.yuque.com/easy-team/easywebpack/babel7",target:"_blank"}},[e._v("https://www.yuque.com/easy-team/easywebpack/babel7")])]),e._v(" "),a("h3",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[e._v("#")])]),e._v(" "),a("h3",{attrs:{id:"内置默认-babelrc-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内置默认-babelrc-配置"}},[e._v("#")]),e._v(" 内置默认 .babelrc 配置")]),e._v(" "),a("blockquote",{staticStyle:{"padding-left":"1em","margin-top":"5px","margin-bottom":"5px","margin-left":"0px","border-left":"3px solid rgb(238, 238, 238)",opacity:"0.6"}},[a("br"),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("进一步简化babel 配置，easywebpack 解决方案内置基本的 babel 配置，无特殊要求，一般无需配置.babelrc 文件")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[a("li",[a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("easywebpack 内置默认配置(^4.9.0)")])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"padding-left":"2em","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("a",{attrs:{href:"https://github.com/easy-team/easywebpack/blob/master/config/.babelrc",target:"_blank"}},[e._v("https://github.com/easy-team/easywebpack/blob/master/config/.babelrc")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[a("li",[a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("easywebpack-vue 内置默认配置(^4.3.0)")])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"padding-left":"2em","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("a",{attrs:{href:"https://github.com/easy-team/easywebpack-vue/blob/master/config/.babelrc",target:"_blank"}},[e._v("https://github.com/easy-team/easywebpack-vue/blob/master/config/.babelrc")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[a("li",[a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("easywebpack-react 默认配置(^4.4.0)")])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("a",{attrs:{href:"https://github.com/easy-team/easywebpack-react/blob/master/config/.babelrc",target:"_blank"}},[e._v("https://github.com/easy-team/easywebpack-react/blob/master/config/.babelrc")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),e._v(" "),a("h3",{attrs:{id:"自定义-babelrc-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义-babelrc-配置"}},[e._v("#")]),e._v(" 自定义 .babelrc 配置")]),e._v(" "),a("blockquote",{staticStyle:{"padding-left":"1em","margin-top":"5px","margin-bottom":"5px","margin-left":"0px","border-left":"3px solid rgb(238, 238, 238)",opacity:"0.6"}},[a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("${root}/.babelrc")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock",id:"Fu0PL"}},[a("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(38, 38, 38)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[a("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[a("div",{staticClass:"language-undefined extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" \n")])])])])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),e._v(" "),a("h2",{attrs:{id:"支持-ssr-模式分别配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持-ssr-模式分别配置"}},[e._v("#")]),e._v(" 支持 SSR 模式分别配置")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),e._v(" "),a("h4",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[e._v("#")]),e._v(" 背景")]),e._v(" "),a("p",{staticStyle:{"padding-left":"2em","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("在进行 Vue/React SSR 模式开发时，运行 "),a("code",{staticStyle:{"font-family":"monospace","font-size":"inherit","background-color":"rgba(0, 0, 0, 0.06)",padding:"0px 2px",border:"1px solid rgba(0, 0, 0, 0.08)","border-radius":"2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0px"}},[e._v("npm run dev")]),e._v("  后你会看到如下界面， 启动了两个 Webpack 构建实例：Node 模式 和 Web 模式。SSR 运行需要 Webapck 单独构建 "),a("code",{staticStyle:{"font-family":"monospace","font-size":"inherit","background-color":"rgba(0, 0, 0, 0.06)",padding:"0px 2px",border:"1px solid rgba(0, 0, 0, 0.08)","border-radius":"2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0px"}},[e._v("target: node")]),e._v("   和 "),a("code",{staticStyle:{"font-family":"monospace","font-size":"inherit","background-color":"rgba(0, 0, 0, 0.06)",padding:"0px 2px",border:"1px solid rgba(0, 0, 0, 0.08)","border-radius":"2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0px"}},[e._v("target: web")]),e._v("  主要的差异在于 Webpack需要处理 require 机制以及磨平 Node 和 浏览器运行环境的差异。")]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("span",{attrs:{"data-card-type":"inline","data-lake-card":"image"}},[a("img",{staticClass:"image lake-drag-image",staticStyle:{visibility:"visible",width:"746px",height:"75px"},attrs:{"data-role":"image",src:"https://cdn.nlark.com/yuque/0/2018/png/116733/1536128449742-0024eb69-d2c7-4e47-8426-ff2cc85396d5.png","data-raw-src":"https://cdn.nlark.com/yuque/0/2018/png/116733/1536128449742-0024eb69-d2c7-4e47-8426-ff2cc85396d5.png"}})])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"padding-left":"2em","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("在 "),a("code",{staticStyle:{"font-family":"monospace","font-size":"inherit","background-color":"rgba(0, 0, 0, 0.06)",padding:"0px 2px",border:"1px solid rgba(0, 0, 0, 0.08)","border-radius":"2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0px"}},[e._v("easywebpack")]),e._v(" 4.6.0 以下 SSR 版本构建方案实现时，Node 和 Web 模式采用的是一份 "),a("code",{staticStyle:{"font-family":"monospace","font-size":"inherit","background-color":"rgba(0, 0, 0, 0.06)",padding:"0px 2px",border:"1px solid rgba(0, 0, 0, 0.08)","border-radius":"2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0px"}},[e._v(".babelrc")]),e._v("  配置，这样导致构建的后代码全部变成 es5。 但 Node 现在LTS 版本已经是 10 了，而且 12 也在开发，不久将会发布。这样导致 Node 端构建的代码没有用到 ES6，ES7，ES8 等特性，我们期望根据 Node 版本构建指定 ES 模式代码，这样可以带来两个好处：")]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[a("li",[a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("Node 端运行的 ES 模块更好的执行效率")])]),a("li",[a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("Node 端编译成 "),a("span",{staticStyle:{"background-color":"transparent"}},[e._v("Current Node  支持的最高 ES，可以减小构建好的 JSBundle 文件大小和编译转换时间，同时带来更好的文件读取效率和执行效率。")])])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),e._v(" "),a("h4",{attrs:{id:"解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[e._v("#")]),e._v(" 解决方案")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[a("li",[a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("Egg + Vue 配置优化："),a("a",{attrs:{href:"https://www.yuque.com/easy-team/egg-vue/babel",target:"_blank"}},[e._v("https://www.yuque.com/easy-team/egg-vue/babel")])])]),a("li",[e._v("Egg + React 配置优化："),a("a",{attrs:{href:"https://www.yuque.com/easy-team/egg-react/babel",target:"_blank"}},[e._v("https://www.yuque.com/easy-team/egg-react/babel")])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),e._v(" "),a("h2",{attrs:{id:"babel-升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-升级"}},[e._v("#")]),e._v(" babel 升级")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")]),a("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[a("li",[a("a",{attrs:{href:"https://www.yuque.com/easy-team/easywebpack/babel7",target:"_blank"}},[e._v("https://www.yuque.com/easy-team/easywebpack/babel7")])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[a("br")])])])}),[],!1,null,null,null);t.default=o.exports}}]);